"use strict";function asyncGeneratorStep(e,t,n,r,o,i,s){try{var a=e[i](s),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function s(e){asyncGeneratorStep(i,r,o,s,a,"next",e)}function a(e){asyncGeneratorStep(i,r,o,s,a,"throw",e)}s(void 0)}))}}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}!function(){var e,t=[],n=document.querySelectorAll("[data-da]"),r=[],o=[];if(n.length>0){for(var i=0,s=0;s<n.length;s++){var a=n[s],l=a.getAttribute("data-da");if(""!=l){var c=l.split(","),d=c[1]?c[1].trim():"last",u=c[2]?c[2].trim():"767",p="min"===c[3]?c[3].trim():"max",m=document.querySelector("."+c[0].trim());c.length>0&&m&&(a.setAttribute("data-da-index",i),t[i]={parent:a.parentNode,index:w(a)},r[i]={element:a,destination:document.querySelector("."+c[0].trim()),place:d,breakpoint:u,type:p},i++)}}(e=r).sort((function(e,t){return e.breakpoint>t.breakpoint?-1:1})),e.sort((function(e,t){return e.place>t.place?1:-1}));for(var f=0;f<r.length;f++){var v=r[f],g=v.breakpoint,y=v.type;o.push(window.matchMedia("("+y+"-width: "+g+"px)")),o[f].addListener(h)}}function h(e){for(var t=0;t<r.length;t++){var n=r[t],i=n.element,s=n.destination,a=n.place,l="_dynamic_adapt_"+n.breakpoint;if(o[t].matches){if(!i.classList.contains(l)){var c=L(s)[a];"first"===a?c=L(s)[0]:"last"===a&&(c=L(s)[L(s).length]),s.insertBefore(i,s.children[c]),i.classList.add(l)}}else i.classList.contains(l)&&(_(i),i.classList.remove(l))}}function _(e){var n=e.getAttribute("data-da-index"),r=t[n],o=r.parent,i=r.index,s=L(o,!0)[i];o.insertBefore(e,o.children[s])}function w(e){return Array.prototype.slice.call(e.parentNode.children).indexOf(e)}function L(e,t){for(var n=e.children,r=[],o=0;o<n.length;o++){var i=n[o];(t||null==i.getAttribute("data-da"))&&r.push(o)}return r}h()}(),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),$(document).ready((function(){$(".header__burger").click((function(e){$(".header__burger, .header__menu").toggleClass("active"),$("body").toggleClass("lock")}));var e=$(".up-btn");$(window).scroll((function(){$(this).scrollTop()>600?e.addClass("show"):e.removeClass("show")})),e.on("click",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"1000")}))}));var selects=document.getElementsByTagName("select");function selects_init(){for(var e=0;e<selects.length;e++){select_init(selects[e])}document.addEventListener("click",(function(e){selects_close(e)})),document.addEventListener("keydown",(function(e){27==e.which&&selects_close(e)}))}function selects_close(e){var t=document.querySelectorAll(".select");if(!e.target.closest(".select"))for(var n=0;n<t.length;n++){var r=t[n],o=r.querySelector(".select__options");r.classList.remove("_active"),_slideUp(o,100)}}function select_init(e){var t=e.parentElement,n=e.getAttribute("class"),r=e.querySelector("option:checked");e.setAttribute("data-default",r.value),e.style.display="none",t.insertAdjacentHTML("beforeend",'<div class="select select_'+n+'"></div>'),e.parentElement.querySelector(".select").appendChild(e),select_item(e)}function select_item(e){var t=e.parentElement,n=t.querySelector(".select__item"),r=e.querySelectorAll("option"),o=e.querySelector("option:checked").text,i=e.getAttribute("data-type");n&&n.remove();var s="";s="input"==i?'<div class="select__value"><input autocomplete="off" type="text" name="form[]" value="'+o+'" data-error="Ошибка" data-value="'+o+'" class="select__input"></div>':'<div class="select__value"><span>'+o+"</span></div>",t.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+s+'</div><div class="select__options">'+select_get_options(r)+"</div></div></div>"),select_actions(e,t)}function select_actions(e,t){var n=t.querySelector(".select__item"),r=t.querySelector(".select__options"),o=t.querySelectorAll(".select__option"),i=e.getAttribute("data-type"),s=t.querySelector(".select__input");n.addEventListener("click",(function(){for(var e=document.querySelectorAll(".select"),o=0;o<e.length;o++){var i=e[o],s=i.querySelector(".select__options");i!=n.closest(".select")&&(i.classList.remove("_active"),_slideUp(s,100))}_slideToggle(r,100),t.classList.toggle("_active")}));for(var a=function(n){var r=o[n],a=r.getAttribute("data-value"),l=r.innerHTML;"input"==i?s.addEventListener("keyup",select_search):r.getAttribute("data-value")==e.value&&(r.style.display="none"),r.addEventListener("click",(function(){for(var n=0;n<o.length;n++){o[n].style.display="block"}"input"==i?(s.value=l,e.value=a):(t.querySelector(".select__value").innerHTML="<span>"+l+"</span>",e.value=a,r.style.display="none")}))},l=0;l<o.length;l++)a(l)}function select_get_options(e){if(e){for(var t="",n=0;n<e.length;n++){var r=e[n],o=r.value;if(""!=o)t=t+'<div data-value="'+o+'" class="select__option">'+r.text+"</div>"}return t}}function select_search(e){e.target.closest(".select ").querySelector(".select__options");for(var t=e.target.closest(".select ").querySelectorAll(".select__option"),n=e.target.value.toUpperCase(),r=0;r<t.length;r++){var o=t[r];(o.textContent||o.innerText).toUpperCase().indexOf(n)>-1?o.style.display="":o.style.display="none"}}function selects_update_all(){var e=document.querySelectorAll("select");if(e)for(var t=0;t<e.length;t++){select_item(e[t])}}selects.length>0&&selects_init();var _slideUp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t)},_slideDown=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var n=window.getComputedStyle(e).display;"none"===n&&(n="block"),e.style.display=n;var r=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=r+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t)},_slideToggle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(!e.classList.contains("_slide"))return e.classList.add("_slide"),"none"===window.getComputedStyle(e).display?_slideDown(e,t):_slideUp(e,t)};document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".popup-link"),t=document.querySelector("body"),n=document.querySelectorAll(".lock-padding"),r=!0;if(e.length>0)for(var o=function(o){var i=e[o];i.addEventListener("click",(function(e){var o=i.getAttribute("href").replace("#","");!function(e){if(e&&r){var o=document.querySelector(".popup.open");o?c(o,!1):function(){var e=window.innerWidth-document.querySelector(".site__main").offsetWidth+"px";//!обратить внимание на контейнер
if(n.length>0)for(var o=0;o<n.length;o++){n[o].style.paddingRight=e}t.style.paddingRight=e,t.classList.add("lock"),r=!1,setTimeout((function(){r=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||c(e.target.closest(".popup"))}))}}(document.getElementById(o)),e.preventDefault()}))},i=0;i<e.length;i++)o(i);var s=document.querySelectorAll(".close-popup");if(s.length>0)for(var a=function(e){var t=s[e];t.addEventListener("click",(function(e){c(t.closest(".popup")),e.preventDefault()}))},l=0;l<s.length;l++)a(l);function c(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r&&(e.classList.remove("open"),t&&d())}function d(){setTimeout((function(){if(n.length>0)for(var e=0;e<n.length;e++){n[e].style.paddingRight="0px"}t.style.paddingRight="0px",t.classList.remove("lock")}),800),r=!1,setTimeout((function(){r=!0}),800)}document.addEventListener("keydown",(function(e){27===e.which&&c(document.querySelector(".popup.open"))})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)})),$(document).ready((function(){$(".accordion__title").click((function(e){var t=$(this).closest(".accordion").attr("id");$("#"+t).hasClass("accordion-one")&&($("#"+t+" .accordion__title").not($(this)).removeClass("active"),$("#"+t+" .accordion__text").not($(this).next()).slideUp(300)),$(this).toggleClass("active").next().slideToggle(300),$(this).hasClass("active")?($(".faq__accordion-item").css({"background-color":"#fff"}),$(this).closest(".faq__accordion-item").css({"background-color":"#142745"})):$(this).closest(".faq__accordion-item").css({"background-color":"#fff"})})),$(".accordion .accordion__title:first").click()})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("form");function t(){return(t=_asyncToGenerator(regeneratorRuntime.mark((function t(r){var o,i,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),o=n(e),(i=new FormData(e)).append("image",s.files[0]),0!==o){t.next=23;break}return e.classList.add("_sending"),t.next=8,fetch("sendmail.php",{method:"POST",body:i});case 8:if(!(l=t.sent).ok){t.next=19;break}return t.next=12,l.json();case 12:c=t.sent,alert(c.message),a.innerHTML="",e.reset(),e.classList.remove("_sending"),t.next=21;break;case 19:alert("Ошибка"),e.classList.remove("_sending");case 21:t.next=24;break;case 23:alert("Заполните обязательные поля");case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(e){for(var t=0,n=document.querySelectorAll("._req"),s=0;s<n.length;s++){var a=n[s];o(a),a.classList.contains("_email")?i(a)&&(r(a),t++):("checkbox"===a.getAttribute("type")&&!1===a.checked||""===a.value)&&(r(a),t++)}return t}function r(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function o(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function i(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(function(e){return t.apply(this,arguments)}));var s=document.getElementById("formImage"),a=document.getElementById("formPreview");s&&s.addEventListener("change",(function(){!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return alert("Разрешены только изображения."),void(s.value="");if(e.size>2097152)return void alert("Файл должен быть менее 2 МБ.");var t=new FileReader;t.onload=function(e){a.innerHTML='<img src="'.concat(e.target.result,'" alt="Фото">')},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(s.files[0])}))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll("._anim-items");if(e.length>0){var t=function(t){for(var r=0;r<e.length;r++){var o=e[r],i=o.offsetHeight,s=n(o).top,a=window.innerHeight-i/55;i>window.innerHeight&&(a=window.innerHeight-window.innerHeight/55),pageYOffset>s-a&&pageYOffset<s+i?o.classList.add("_active"):o.classList.contains("_anim-no-hide")||o.classList.remove("_active")}},n=function(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+r,left:t.left+n}};window.addEventListener("scroll",t),setTimeout((function(){t()}),300)}var r=window.matchMedia("(min-width: 576px)");if(r.addListener((function(e){if(e.matches){ScrollTrigger.create({trigger:".skrolltriger__content",pin:".skrolltriger__content",start:"top center",end:"+=670"});gsap.utils.toArray(".skrolltriger__card").forEach((function(e){gsap.to(e,{opacity:1,scrollTrigger:{trigger:e,scrub:!0,start:"top 90%",end:"bottom 55%"}})}))}})),r.matches){ScrollTrigger.create({trigger:".skrolltriger__content",pin:".skrolltriger__content",start:"top center",end:"+=670"});gsap.utils.toArray(".skrolltriger__card").forEach((function(e){gsap.to(e,{opacity:1,scrollTrigger:{trigger:e,scrub:!0,start:"top 90%",end:"bottom 55%"}})}))}})),$(document).ready((function(){var e=window.matchMedia("(min-width: 992px)");if(e.addListener((function(e){if(e.matches){var t=document.getElementById("scene");new Parallax(t)}})),e.matches){var t=document.getElementById("scene");new Parallax(t)}}));