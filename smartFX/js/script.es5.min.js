"use strict";function asyncGeneratorStep(e,t,n,o,r,i,s){try{var l=e[i](s),a=l.value}catch(e){return void n(e)}l.done?t(a):Promise.resolve(a).then(o,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function s(e){asyncGeneratorStep(i,o,r,s,l,"next",e)}function l(e){asyncGeneratorStep(i,o,r,s,l,"throw",e)}s(void 0)}))}}function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}!function(){var e,t=[],n=document.querySelectorAll("[data-da]"),o=[],r=[];if(n.length>0){for(var i=0,s=0;s<n.length;s++){var l=n[s],a=l.getAttribute("data-da");if(""!=a){var c=a.split(","),d=c[1]?c[1].trim():"last",p=c[2]?c[2].trim():"767",u="min"===c[3]?c[3].trim():"max",m=document.querySelector("."+c[0].trim());c.length>0&&m&&(l.setAttribute("data-da-index",i),t[i]={parent:l.parentNode,index:k(l)},o[i]={element:l,destination:document.querySelector("."+c[0].trim()),place:d,breakpoint:p,type:u},i++)}}(e=o).sort((function(e,t){return e.breakpoint>t.breakpoint?-1:1})),e.sort((function(e,t){return e.place>t.place?1:-1}));for(var y=0;y<o.length;y++){var v=o[y],f=v.breakpoint,g=v.type;r.push(window.matchMedia("("+g+"-width: "+f+"px)")),r[y].addListener(h)}}function h(e){for(var t=0;t<o.length;t++){var n=o[t],i=n.element,s=n.destination,l=n.place,a="_dynamic_adapt_"+n.breakpoint;if(r[t].matches){if(!i.classList.contains(a)){var c=b(s)[l];"first"===l?c=b(s)[0]:"last"===l&&(c=b(s)[b(s).length]),s.insertBefore(i,s.children[c]),i.classList.add(a)}}else i.classList.contains(a)&&(_(i),i.classList.remove(a))}}function _(e){var n=e.getAttribute("data-da-index"),o=t[n],r=o.parent,i=o.index,s=b(r,!0)[i];r.insertBefore(e,r.children[s])}function k(e){return Array.prototype.slice.call(e.parentNode.children).indexOf(e)}function b(e,t){for(var n=e.children,o=[],r=0;r<n.length;r++){var i=n[r];(t||null==i.getAttribute("data-da"))&&o.push(r)}return o}h()}(),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),$(document).ready((function(){$(".header__burger").click((function(e){$(".header__burger, .header__menu").toggleClass("active"),$("body").toggleClass("lock")}))}));var selects=document.getElementsByTagName("select");function selects_init(){for(var e=0;e<selects.length;e++){select_init(selects[e])}document.addEventListener("click",(function(e){selects_close(e)})),document.addEventListener("keydown",(function(e){27==e.which&&selects_close(e)}))}function selects_close(e){var t=document.querySelectorAll(".select");if(!e.target.closest(".select"))for(var n=0;n<t.length;n++){var o=t[n],r=o.querySelector(".select__options");o.classList.remove("_active"),_slideUp(r,100)}}function select_init(e){var t=e.parentElement,n=e.getAttribute("class"),o=e.querySelector("option:checked");e.setAttribute("data-default",o.value),e.style.display="none",t.insertAdjacentHTML("beforeend",'<div class="select select_'+n+'"></div>'),e.parentElement.querySelector(".select").appendChild(e),select_item(e)}function select_item(e){var t=e.parentElement,n=t.querySelector(".select__item"),o=e.querySelectorAll("option"),r=e.querySelector("option:checked").text,i=e.getAttribute("data-type");n&&n.remove();var s="";s="input"==i?'<div class="select__value"><input autocomplete="off" type="text" name="form[]" value="'+r+'" data-error="Ошибка" data-value="'+r+'" class="select__input"></div>':'<div class="select__value"><span>'+r+"</span></div>",t.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+s+'</div><div class="select__options">'+select_get_options(o)+"</div></div></div>"),select_actions(e,t)}function select_actions(e,t){var n=t.querySelector(".select__item"),o=t.querySelector(".select__options"),r=t.querySelectorAll(".select__option"),i=e.getAttribute("data-type"),s=t.querySelector(".select__input");n.addEventListener("click",(function(){for(var e=document.querySelectorAll(".select"),r=0;r<e.length;r++){var i=e[r],s=i.querySelector(".select__options");i!=n.closest(".select")&&(i.classList.remove("_active"),_slideUp(s,100))}_slideToggle(o,100),t.classList.toggle("_active")}));for(var l=function(n){var o=r[n],l=o.getAttribute("data-value"),a=o.innerHTML;"input"==i?s.addEventListener("keyup",select_search):o.getAttribute("data-value")==e.value&&(o.style.display="none"),o.addEventListener("click",(function(){for(var n=0;n<r.length;n++){r[n].style.display="block"}"input"==i?(s.value=a,e.value=l):(t.querySelector(".select__value").innerHTML="<span>"+a+"</span>",e.value=l,o.style.display="none")}))},a=0;a<r.length;a++)l(a)}function select_get_options(e){if(e){for(var t="",n=0;n<e.length;n++){var o=e[n],r=o.value;if(""!=r)t=t+'<div data-value="'+r+'" class="select__option">'+o.text+"</div>"}return t}}function select_search(e){e.target.closest(".select ").querySelector(".select__options");for(var t=e.target.closest(".select ").querySelectorAll(".select__option"),n=e.target.value.toUpperCase(),o=0;o<t.length;o++){var r=t[o];(r.textContent||r.innerText).toUpperCase().indexOf(n)>-1?r.style.display="":r.style.display="none"}}function selects_update_all(){var e=document.querySelectorAll("select");if(e)for(var t=0;t<e.length;t++){select_item(e[t])}}selects.length>0&&selects_init();var _slideUp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t)},_slideDown=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var n=window.getComputedStyle(e).display;"none"===n&&(n="block"),e.style.display=n;var o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t)},_slideToggle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(!e.classList.contains("_slide"))return e.classList.add("_slide"),"none"===window.getComputedStyle(e).display?_slideDown(e,t):_slideUp(e,t)},popupLinks=document.querySelectorAll(".popup-link"),body=document.querySelector("body"),lockPadding=document.querySelectorAll(".lock-padding"),unlock=!0,timeout=800;if(popupLinks.length>0)for(var _loop2=function(e){var t=popupLinks[e];t.addEventListener("click",(function(e){var n=t.getAttribute("href").replace("#","");popupOpen(document.getElementById(n)),e.preventDefault()}))},index=0;index<popupLinks.length;index++)_loop2(index);var popupCloseIcon=document.querySelectorAll(".close-popup");if(popupCloseIcon.length>0)for(var _loop3=function(e){var t=popupCloseIcon[e];t.addEventListener("click",(function(e){popupClose(t.closest(".popup")),e.preventDefault()}))},_index4=0;_index4<popupCloseIcon.length;_index4++)_loop3(_index4);function popupOpen(e){if(e&&unlock){var t=document.querySelector(".popup.open");t?popupClose(t,!1):bodyLock(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||popupClose(e.target.closest(".popup"))}))}}function popupClose(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];unlock&&(e.classList.remove("open"),t&&bodyUnLock())}function bodyLock(){var e=window.innerWidth-document.querySelector(".site-content").offsetWidth+"px";//!обратить внимание на контейнер
if(lockPadding.length>0)for(var t=0;t<lockPadding.length;t++){lockPadding[t].style.paddingRight=e}body.style.paddingRight=e,body.classList.add("lock"),unlock=!1,setTimeout((function(){unlock=!0}),timeout)}function bodyUnLock(){setTimeout((function(){if(lockPadding.length>0)for(var e=0;e<lockPadding.length;e++){lockPadding[e].style.paddingRight="0px"}body.style.paddingRight="0px",body.classList.remove("lock")}),timeout),unlock=!1,setTimeout((function(){unlock=!0}),timeout)}document.addEventListener("keydown",(function(e){27===e.which&&popupClose(document.querySelector(".popup.open"))})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),$(document).ready((function(){$(".accordion__title").click((function(e){var t=$(this).closest(".accordion").attr("id");$("#"+t).hasClass("accordion-one")&&($("#"+t+" .accordion__title").not($(this)).removeClass("active"),$("#"+t+" .accordion__text").not($(this).next()).slideUp(300)),$(this).toggleClass("active").next().slideToggle(300),$(this).hasClass("active")?($(".faq__accordion-item").css({"background-color":"#fff"}),$(this).closest(".faq__accordion-item").css({"background-color":"#142745"})):$(this).closest(".faq__accordion-item").css({"background-color":"#fff"})})),$(".accordion .accordion__title:first").click()})),document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("form");function t(){return(t=_asyncToGenerator(regeneratorRuntime.mark((function t(o){var r,i,a,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.preventDefault(),r=n(e),(i=new FormData(e)).append("image",s.files[0]),0!==r){t.next=23;break}return e.classList.add("_sending"),t.next=8,fetch("sendmail.php",{method:"POST",body:i});case 8:if(!(a=t.sent).ok){t.next=19;break}return t.next=12,a.json();case 12:c=t.sent,alert(c.message),l.innerHTML="",e.reset(),e.classList.remove("_sending"),t.next=21;break;case 19:alert("Ошибка"),e.classList.remove("_sending");case 21:t.next=24;break;case 23:alert("Заполните обязательные поля");case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(e){for(var t=0,n=document.querySelectorAll("._req"),s=0;s<n.length;s++){var l=n[s];r(l),l.classList.contains("_email")?i(l)&&(o(l),t++):("checkbox"===l.getAttribute("type")&&!1===l.checked||""===l.value)&&(o(l),t++)}return t}function o(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function r(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function i(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(function(e){return t.apply(this,arguments)}));var s=document.getElementById("formImage"),l=document.getElementById("formPreview");s&&s.addEventListener("change",(function(){!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return alert("Разрешены только изображения."),void(s.value="");if(e.size>2097152)return void alert("Файл должен быть менее 2 МБ.");var t=new FileReader;t.onload=function(e){l.innerHTML='<img src="'.concat(e.target.result,'" alt="Фото">')},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(s.files[0])}))})),$(document).ready((function(){var e=window.matchMedia("(min-width: 992px)");if(e.addListener((function(e){if(e.matches){var t=document.getElementById("scene");new Parallax(t)}})),e.matches){var t=document.getElementById("scene");new Parallax(t)}}));