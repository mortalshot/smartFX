"use strict";function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}!function(){let e=[],t=document.querySelectorAll("[data-da]"),o=[],n=[];if(t.length>0){let c=0;for(let n=0;n<t.length;n++){const s=t[n],r=s.getAttribute("data-da");if(""!=r){const t=r.split(","),n=t[1]?t[1].trim():"last",a=t[2]?t[2].trim():"767",d="min"===t[3]?t[3].trim():"max",u=document.querySelector("."+t[0].trim());t.length>0&&u&&(s.setAttribute("data-da-index",c),e[c]={parent:s.parentNode,index:(l=s,i=void 0,i=Array.prototype.slice.call(l.parentNode.children),i.indexOf(l))},o[c]={element:s,destination:document.querySelector("."+t[0].trim()),place:n,breakpoint:a,type:d},c++)}}(s=o).sort((function(e,t){return e.breakpoint>t.breakpoint?-1:1})),s.sort((function(e,t){return e.place>t.place?1:-1}));for(let e=0;e<o.length;e++){const t=o[e],s=t.breakpoint,l=t.type;n.push(window.matchMedia("("+l+"-width: "+s+"px)")),n[e].addListener(r)}}var s,l,i;function r(e){for(let e=0;e<o.length;e++){const t=o[e],s=t.element,l=t.destination,i=t.place,r="_dynamic_adapt_"+t.breakpoint;if(n[e].matches){if(!s.classList.contains(r)){let e=a(l)[i];"first"===i?e=a(l)[0]:"last"===i&&(e=a(l)[a(l).length]),l.insertBefore(s,l.children[e]),s.classList.add(r)}}else s.classList.contains(r)&&(c(s),s.classList.remove(r))}}function c(t){const o=t.getAttribute("data-da-index"),n=e[o],s=n.parent,l=n.index,i=a(s,!0)[l];s.insertBefore(t,s.children[i])}function a(e,t){const o=e.children,n=[];for(let e=0;e<o.length;e++){const s=o[e];(t||null==s.getAttribute("data-da"))&&n.push(e)}return n}r()}(),testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")})),$(document).ready((function(){$(".header__burger").click((function(e){$(".header__burger, .header__menu").toggleClass("active"),$("body").toggleClass("lock")}));const e=$(".up-btn");$(window).scroll((function(){$(this).scrollTop()>600?e.addClass("show"):e.removeClass("show")})),e.on("click",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},"1000")}))}));let selects=document.getElementsByTagName("select");function selects_init(){for(let e=0;e<selects.length;e++){select_init(selects[e])}document.addEventListener("click",(function(e){selects_close(e)})),document.addEventListener("keydown",(function(e){27==e.which&&selects_close(e)}))}function selects_close(e){const t=document.querySelectorAll(".select");if(!e.target.closest(".select"))for(let e=0;e<t.length;e++){const o=t[e],n=o.querySelector(".select__options");o.classList.remove("_active"),_slideUp(n,100)}}function select_init(e){const t=e.parentElement,o=e.getAttribute("class"),n=e.querySelector("option:checked");e.setAttribute("data-default",n.value),e.style.display="none",t.insertAdjacentHTML("beforeend",'<div class="select select_'+o+'"></div>'),e.parentElement.querySelector(".select").appendChild(e),select_item(e)}function select_item(e){const t=e.parentElement,o=t.querySelector(".select__item"),n=e.querySelectorAll("option"),s=e.querySelector("option:checked").text,l=e.getAttribute("data-type");o&&o.remove();let i="";i="input"==l?'<div class="select__value"><input autocomplete="off" type="text" name="form[]" value="'+s+'" data-error="Ошибка" data-value="'+s+'" class="select__input"></div>':'<div class="select__value"><span>'+s+"</span></div>",t.insertAdjacentHTML("beforeend",'<div class="select__item"><div class="select__title">'+i+'</div><div class="select__options">'+select_get_options(n)+"</div></div></div>"),select_actions(e,t)}function select_actions(e,t){const o=t.querySelector(".select__item"),n=t.querySelector(".select__options"),s=t.querySelectorAll(".select__option"),l=e.getAttribute("data-type"),i=t.querySelector(".select__input");o.addEventListener("click",(function(){let e=document.querySelectorAll(".select");for(let t=0;t<e.length;t++){const n=e[t],s=n.querySelector(".select__options");n!=o.closest(".select")&&(n.classList.remove("_active"),_slideUp(s,100))}_slideToggle(n,100),t.classList.toggle("_active")}));for(let o=0;o<s.length;o++){const n=s[o],r=n.getAttribute("data-value"),c=n.innerHTML;"input"==l?i.addEventListener("keyup",select_search):n.getAttribute("data-value")==e.value&&(n.style.display="none"),n.addEventListener("click",(function(){for(let e=0;e<s.length;e++){s[e].style.display="block"}"input"==l?(i.value=c,e.value=r):(t.querySelector(".select__value").innerHTML="<span>"+c+"</span>",e.value=r,n.style.display="none")}))}}function select_get_options(e){if(e){let t="";for(let o=0;o<e.length;o++){const n=e[o],s=n.value;if(""!=s){t=t+'<div data-value="'+s+'" class="select__option">'+n.text+"</div>"}}return t}}function select_search(e){e.target.closest(".select ").querySelector(".select__options");let t=e.target.closest(".select ").querySelectorAll(".select__option"),o=e.target.value.toUpperCase();for(let e=0;e<t.length;e++){let n=t[e];(n.textContent||n.innerText).toUpperCase().indexOf(o)>-1?n.style.display="":n.style.display="none"}}function selects_update_all(){let e=document.querySelectorAll("select");if(e)for(let t=0;t<e.length;t++){select_item(e[t])}}selects.length>0&&selects_init();let _slideUp=(e,t=500)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)},_slideDown=(e,t=500)=>{e.style.removeProperty("display");let o=window.getComputedStyle(e).display;"none"===o&&(o="block"),e.style.display=o;let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")},t)},_slideToggle=(e,t=500)=>{if(!e.classList.contains("_slide"))return e.classList.add("_slide"),"none"===window.getComputedStyle(e).display?_slideDown(e,t):_slideUp(e,t)};document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".popup-link"),t=document.querySelector("body"),o=document.querySelectorAll(".lock-padding");let n=!0;if(e.length>0)for(let t=0;t<e.length;t++){const o=e[t];o.addEventListener("click",(function(e){const t=o.getAttribute("href").replace("#","");l(document.getElementById(t)),e.preventDefault()}))}const s=document.querySelectorAll(".close-popup");if(s.length>0)for(let e=0;e<s.length;e++){const t=s[e];t.addEventListener("click",(function(e){i(t.closest(".popup")),e.preventDefault()}))}function l(e){if(e&&n){const s=document.querySelector(".popup.open");s?i(s,!1):function(){const e=window.innerWidth-document.querySelector(".site__main").offsetWidth+"px";//!обратить внимание на контейнер
if(o.length>0)for(let t=0;t<o.length;t++){o[t].style.paddingRight=e}t.style.paddingRight=e,t.classList.add("lock"),n=!1,setTimeout((function(){n=!0}),800)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup__content")||i(e.target.closest(".popup"))}))}}function i(e,s=!0){n&&(e.classList.remove("open"),s&&(setTimeout((function(){if(o.length>0)for(let e=0;e<o.length;e++)o[e].style.paddingRight="0px";t.style.paddingRight="0px",t.classList.remove("lock")}),800),n=!1,setTimeout((function(){n=!0}),800)))}document.addEventListener("keydown",(function(e){if(27===e.which){i(document.querySelector(".popup.open"))}})),Element.prototype.closest||(Element.prototype.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector)})),$(document).ready((function(){$(".accordion__title").click((function(e){let t=$(this).closest(".accordion").attr("id");$("#"+t).hasClass("accordion-one")&&($("#"+t+" .accordion__title").not($(this)).removeClass("active"),$("#"+t+" .accordion__text").not($(this).next()).slideUp(300)),$(this).toggleClass("active").next().slideToggle(300),$(this).hasClass("active")?($(".faq__accordion-item").css({"background-color":"#fff"}),$(this).closest(".faq__accordion-item").css({"background-color":"#142745"})):$(this).closest(".faq__accordion-item").css({"background-color":"#fff"})})),$(".accordion .accordion__title:first").click()})),document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function o(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function n(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}e.addEventListener("submit",(async function(i){i.preventDefault();let r=function(e){let s=0,l=document.querySelectorAll("._req");for(let e=0;e<l.length;e++){const i=l[e];o(i),i.classList.contains("_email")?n(i)&&(t(i),s++):("checkbox"===i.getAttribute("type")&&!1===i.checked||""===i.value)&&(t(i),s++)}return s}(),c=new FormData(e);if(c.append("image",s.files[0]),0===r){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:c});if(t.ok){let o=await t.json();alert(o.message),l.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Ошибка"),e.classList.remove("_sending")}else alert("Заполните обязательные поля")}));const s=document.getElementById("formImage"),l=document.getElementById("formPreview");s&&s.addEventListener("change",()=>{!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return alert("Разрешены только изображения."),void(s.value="");if(e.size>2097152)return void alert("Файл должен быть менее 2 МБ.");var t=new FileReader;t.onload=function(e){l.innerHTML=`<img src="${e.target.result}" alt="Фото">`},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(s.files[0])})})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll("._anim-items");if(e.length>0){function t(t){for(let t=0;t<e.length;t++){const n=e[t],s=n.offsetHeight,l=o(n).top,i=55;let r=window.innerHeight-s/i;s>window.innerHeight&&(r=window.innerHeight-window.innerHeight/i),pageYOffset>l-r&&pageYOffset<l+s?n.classList.add("_active"):n.classList.contains("_anim-no-hide")||n.classList.remove("_active")}}function o(e){const t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+o}}window.addEventListener("scroll",t),setTimeout(()=>{t()},300)}const n=window.matchMedia("(min-width: 576px)");if(n.addListener((function(e){if(e.matches){ScrollTrigger.create({trigger:".skrolltriger__content",pin:".skrolltriger__content",start:"top center",end:"+=670"});gsap.utils.toArray(".skrolltriger__card").forEach(e=>{gsap.to(e,{opacity:1,scrollTrigger:{trigger:e,scrub:!0,start:"top 90%",end:"bottom 55%"}})})}})),n.matches){ScrollTrigger.create({trigger:".skrolltriger__content",pin:".skrolltriger__content",start:"top center",end:"+=670"});gsap.utils.toArray(".skrolltriger__card").forEach(e=>{gsap.to(e,{opacity:1,scrollTrigger:{trigger:e,scrub:!0,start:"top 90%",end:"bottom 55%"}})})}})),$(document).ready((function(){const e=window.matchMedia("(min-width: 992px)");if(e.addListener((function(e){if(e.matches){var t=document.getElementById("scene");new Parallax(t)}})),e.matches){var t=document.getElementById("scene");new Parallax(t)}}));